@page "/order"
@inject HttpClient Http
@inject Blazored.LocalStorage.ILocalStorageService localStorage
@inject IJSRuntime JSRuntime;
@inject NavigationManager NavigationManager

<div class="opener">
    <h4>Choose Your Switchel</h4>
    <p>Click the items below to see more about each one and place your order.</p>
</div>

<div class="d-flex mb-1">
    <button class="btn btn-dark btn-outline-light btn-width m-auto" @onclick="@(e => Toggle(e, "classic-switchel"))">Classic Switchel</button>
    <br />
</div>
<div id="classic-switchel" class="hr-dark" style="display: none">
    <div class="card border-dark">
        <div class="card-body">
            @*<p>Put description here...</p>

                <hr />*@

            <form>
                <div class="form-group">
                    <div class="d-flex">
                        <label for="formControlRange">Organic Apple Cider Vinegar</label>
                        <div class="ml-auto"><p>Level: 3</p></div>
                    </div>
                    <input type="range" class="form-control-range" id="formControlRange" min="0" max="10" step="1" value="5" disabled>
                    <IngredientLevel />
                    <br />

                    <div class="d-flex">
                        <label for="formControlRange">Fresh Ginger</label>
                        <div class="ml-auto"><p>Level: 2</p></div>
                    </div>
                    <input type="range" class="form-control-range" id="formControlRange" min="0" max="10" step="1" value="3" disabled>
                    <IngredientLevel />
                    <br />

                    <div class="d-flex">
                        <label for="formControlRange">Nutrient-packed Maple</label>
                        <div class="ml-auto"><p>Level: 3</p></div>
                    </div>
                    <input type="range" class="form-control-range" id="formControlRange" min="0" max="10" step="1" value="5" disabled>
                    <IngredientLevel />
                    <br />

                    <div class="col-auto my-1">
                        <label class="mr-sm-2" for="chooseWater">Water</label>
                        <select class="custom-select mr-sm-2" id="chooseWater">
                            <option selected>Choose...</option>
                            <option value="1">Filtered Water</option>
                            <option value="2">Sparkling Water</option>
                        </select>
                    </div>

                    <br />

                    <div class="col-auto my-1">
                        <label class="mr-sm-2" for="chooseQuantity">Quantity</label>
                        <select class="custom-select mr-sm-2" id="chooseQuantity">
                            <option selected>Choose...</option>
                            <option value="12">12 fluid ounces</option>
                            <option value="24">24 fluid ounces</option>
                            <option value="33">33 fluid ounces</option>
                        </select>
                    </div>

                    <br /><br />

                    <div class="d-flex justify-content-center">
                        <a class="btn btn-outline-light btn-lg btn-order" style="color: white" @onclick="@(e => SubmitOrder(e, "Classic Switchel"))">Place Order</a>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <br />
</div>

<div class="d-flex mb-1">
    <button class="btn btn-dark btn-outline-light btn-width m-auto" @onclick="@(e => Toggle(e, "lemon-switchel"))">Lemon Switchel</button>
    <br />
</div>
<div id="lemon-switchel" class="hr-dark" style="display: none">
    <div class="card border-dark">
        <div class="card-body">
            @*<p>Put description here...</p>

                <hr />*@

            <form>
                <div class="form-group">
                    <div class="d-flex">
                        <label for="formControlRange">Organic Apple Cider Vinegar</label>
                        <div class="ml-auto"><p>Level: 3</p></div>
                    </div>
                    <input type="range" class="form-control-range" id="formControlRange" min="0" max="10" step="1" value="5" disabled>
                    <IngredientLevel />
                    <br />

                    <div class="d-flex">
                        <label for="formControlRange">Fresh Ginger</label>
                        <div class="ml-auto"><p>Level: 3</p></div>
                    </div>
                    <input type="range" class="form-control-range" id="formControlRange" min="0" max="10" step="1" value="5" disabled>
                    <IngredientLevel />
                    <br />

                    <div class="d-flex">
                        <label for="formControlRange">Nutrient-packed Maple</label>
                        <div class="ml-auto"><p>Level: 3</p></div>
                    </div>
                    <input type="range" class="form-control-range" id="formControlRange" min="0" max="10" step="1" value="5" disabled>
                    <IngredientLevel />
                    <br />

                    <div class="d-flex">
                        <label for="formControlRange">Hand-Squeezed Lemon</label>
                        <div class="ml-auto"><p>Level: 3</p></div>
                    </div>
                    <input type="range" class="form-control-range" id="formControlRange" min="0" max="10" step="1" value="5" disabled>
                    <IngredientLevel />
                    <br />

                    <div class="col-auto my-1">
                        <label class="mr-sm-2" for="chooseWater">Water</label>
                        <select class="custom-select mr-sm-2" id="chooseWater">
                            <option selected>Choose...</option>
                            <option value="1">Filtered Water</option>
                            <option value="2">Sparkling Water</option>
                        </select>
                    </div>

                    <br />

                    <div class="col-auto my-1">
                        <label class="mr-sm-2" for="chooseQuantity">Quantity</label>
                        <select class="custom-select mr-sm-2" id="chooseQuantity">
                            <option selected>Choose...</option>
                            <option value="12">12 fluid ounces</option>
                            <option value="24">24 fluid ounces</option>
                            <option value="33">33 fluid ounces</option>
                        </select>
                    </div>

                    <br /><br />

                    <div class="d-flex justify-content-center">
                        <button class="btn btn-outline-light btn-lg btn-order" type="submit">Place Order</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <br />

</div>

<div class="d-flex mb-1">
    <button class="btn btn-dark btn-outline-light btn-width m-auto" @onclick="@(e => Toggle(e, "turmeric-switchel"))" disabled>Golden Switchel - Coming soon</button>
    <br />
</div>
<div id="turmeric-switchel" class="hr-dark" style="display: none">
    <div class="card border-dark">
        <div class="card-body">
            @*<p>Put description here...</p>

                <hr />*@

            <form>
                <div class="form-group">
                    <label for="formControlRange">Organic Apple Cider Vinegar</label>
                    <input type="range" class="form-control-range" id="formControlRange" min="0" max="6" step="1" value="4" disabled>
                    <br />

                    <label for="formControlRange">Fresh Ginger Juice</label>
                    <input type="range" class="form-control-range" id="formControlRange" min="0" max="6" step="1" value="2" disabled>
                    <br />

                    <label for="formControlRange">Nutrient-packed Maple</label>
                    <input type="range" class="form-control-range" id="formControlRange" min="0" max="6" step="1" value="4" disabled>
                    <br />

                    <label for="formControlRange">Hand-Squeezed Lemon Juice</label>
                    <input type="range" class="form-control-range" id="formControlRange" min="0" max="6" step="1" value="0" disabled>
                    <br />

                    <label for="formControlRange">Responsibly Sourced Turmeric</label>
                    <input type="range" class="form-control-range" id="formControlRange" min="0" max="6" step="1" value="3" disabled>
                    <br />

                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1" value="option1">
                        <label class="form-check-label" for="inlineRadio1">Sparkling Water</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio2" value="option2">
                        <label class="form-check-label" for="inlineRadio2">Filtered Water</label>
                    </div>
                    <br /><br />

                    <label for="formControlRange" class="pb-1">Choose Quantity</label><br />
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1" value="option1">
                        <label class="form-check-label" for="inlineRadio1">12 fluid ounces</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio2" value="option2">
                        <label class="form-check-label" for="inlineRadio2">24 fluid ounces</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio2" value="option2">
                        <label class="form-check-label" for="inlineRadio2">33 fluid ounces</label>
                    </div>
                    <br /><br />

                    <button class="btn btn-outline-light btn-lg btn-order" type="submit">Order Golden Switchel</button>
                </div>
            </form>
        </div>
    </div>

    <br />

</div>

<div class=" d-flex mb-1">
    <button class="btn btn-dark btn-outline-light btn-width m-auto" @onclick="@(e => Toggle(e, "custom-switchel"))" disabled>Customize Your Own - Coming soon</button>
    <br />
</div>
<div id="custom-switchel" class="hr-dark" style="display: none">
    <div class="card border-dark">
        <div class="card-body">
            @*<p>Put description here...</p>

                <hr />*@

            <form>
                <div class="form-group">
                    <div class="d-flex">
                        <label for="formControlRange">Organic Apple Cider Vinegar</label>
                        <div class="ml-auto"><p>Level: 3</p></div>
                    </div>
                    <IngredientLevel />
                    <br />

                    <div class="d-flex">
                        <label for="formControlRange">Fresh Ginger</label>
                        <div class="ml-auto"><p>Level: 3</p></div>
                    </div>
                    <IngredientLevel />
                    <br />

                    <div class="d-flex">
                        <label for="formControlRange">Nutrient-packed Maple</label>
                        <div class="ml-auto"><p>Level: 3</p></div>
                    </div>
                    <IngredientLevel />
                    <br />

                    <div class="d-flex">
                        <label for="formControlRange">Hand-Squeezed Lemon</label>
                        <div class="ml-auto"><p>Level: 3</p></div>
                    </div>
                    <IngredientLevel />
                    <br />

                    <div class="d-flex">
                        <label for="formControlRange">Responsibly-sourced Turmeric</label>
                        <div class="ml-auto"><p>Level: 3</p></div>
                    </div>
                    <IngredientLevel />
                    <br />

                    <div class="col-auto my-1">
                        <label class="mr-sm-2" for="chooseWater">Water</label>
                        <select class="custom-select mr-sm-2" id="chooseWater">
                            <option selected>Choose...</option>
                            <option value="1">Filtered Water</option>
                            <option value="2">Sparkling Water</option>
                        </select>
                    </div>

                    <br />

                    <div class="col-auto my-1">
                        <label class="mr-sm-2" for="chooseQuantity">Quantity</label>
                        <select class="custom-select mr-sm-2" id="chooseQuantity">
                            <option selected>Choose...</option>
                            <option value="12">12 fluid ounces</option>
                            <option value="24">24 fluid ounces</option>
                            <option value="33">33 fluid ounces</option>
                        </select>
                    </div>

                    <br /><br />

                    <div class="d-flex justify-content-center">
                        <button class="btn btn-outline-light btn-lg btn-order" type="submit">Save and Place Order</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <br />

</div>

@*<p>This component demonstrates fetching data from the server.</p>

    @if (forecasts == null)
    {
        <p><em>Loading...</em></p>
    }
    else
    {
        <table class="table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Temp. (C)</th>
                    <th>Temp. (F)</th>
                    <th>Summary</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var forecast in forecasts)
                {
                    <tr>
                        <td>@forecast.Date.ToShortDateString()</td>
                        <td>@forecast.TemperatureC</td>
                        <td>@forecast.TemperatureF</td>
                        <td>@forecast.Summary</td>
                    </tr>
                }
            </tbody>
        </table>
    }*@

@code {

    //private readonly OrdersDbContext ordersDbContext;

    string name;

    protected override async Task OnInitializedAsync()
    {

    }

    private async Task Toggle(MouseEventArgs e, string id)
    {
        await JSRuntime.InvokeAsync<object>("toggleVisibility", id);
    }

    private async Task SubmitOrder(MouseEventArgs e, string type)
    {
        var newOrder = new OpenOrder();

        name = await JSRuntime.InvokeAsync<string>("getRecipient");
        newOrder.recipient = name + "'s";
        newOrder.productName = type;
        newOrder.day = DateTime.Today;

        List<OpenOrder> openOrders = await localStorage.GetItemAsync<List<OpenOrder>>("Orders");

        openOrders.Add(newOrder);

        await localStorage.SetItemAsync("Orders", openOrders);

        var ordersToDisplay = await localStorage.GetItemAsync<List<OpenOrder>>("Orders");

        Console.WriteLine("test2");
        Console.WriteLine(ordersToDisplay.Count);

        //var client = new MongoClient("mongodb://rcsqn8:firstTimMongoDB@azurecluster-shard-00-00.m70u9.azure.mongodb.net:27017,azurecluster-shard-00-01.m70u9.azure.mongodb.net:27017,azurecluster-shard-00-02.m70u9.azure.mongodb.net:27017/test?authSource=admin&replicaSet=atlas-14533q-shard-0&readPreference=primary&appname=MongoDB%20Compass&ssl=true");
        //var db = client.GetDatabase("MongoDB");
        //var collection = db.GetCollection<BsonDocument>("switchelOrders");
        //var document = new BsonDocument
        //{
        //    { "type", "classic" }
        //};
        //await collection.InsertOneAsync(document);

        // Initialize a new instance of CosmosClient using the built-in account endpoint and key parameters
        //CosmosClient cosmosClient = new CosmosClient("https://f66190b5-0ee0-4-231-b9ee.documents.azure.com:443/", "ySYCJJw4m24Fchh4KS6IMWg5wg3NzFT4vGFFHNxw5RPNXhapOM84WsUSehyhXvaLNO4P2PQwhcjEeYk0blrfdw==");

        // Create a new database and container with 400 RU/s
        //Microsoft.Azure.Cosmos.Database database = await cosmosClient.CreateDatabaseIfNotExistsAsync("CosmosIOTDemo");
        //Container container = await database.CreateContainerIfNotExistsAsync("orders", "/orderNumber", 1);

        //var itemResponse = await container.CreateItemAsync<OpenOrder>(newOrder);

        //ordersDbContext.OpenOrders.Add(newOrder);
        //ordersDbContext.SaveChanges();

        NavigationManager.NavigateTo("/");
    }
}
